#!/usr/bin/env bash

# Generate RSA key pair with the specified requirements
ssh-keygen -t rsa -b 4096 -f school -N betty -C "Generated by script"

# Check if the private key file exists and is a valid OpenSSH key
if [ -f school ]; then
    if file school | grep -q "OpenSSH private key"; then
        echo "Private key file 'school' exists and is an OpenSSH private key."
    else
        echo "Error: 'school' is not an OpenSSH private key."
        exit 1
    fi
else
    echo "Error: Private key file 'school' does not exist."
    exit 1
fi

# Check if the public key file exists
if [ -f school.pub ]; then
    echo "Public key file 'school.pub' exists."
else
    echo "Error: Public key file 'school.pub' does not exist."
    exit 1
fi

# Confirm key generation
echo "Key pair successfully generated."
ls -l school school.pub
